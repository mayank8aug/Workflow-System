(this["webpackJsonpworkflow-system"]=this["webpackJsonpworkflow-system"]||[]).push([[0],{32:function(e,t,n){e.exports=n(54)},42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(17),c=n.n(l),o=n(5),s=n(10),i=n(30),u={isLoggedIn:!1,email:null};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object.assign({},e,{isLoggedIn:!0,email:t.email});case"LOGOUT_USER":return Object.assign({},e,{isLoggedIn:!1,email:null});default:return e}},f={filterState:null,searchQuery:null};var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_QUERY":return Object.assign({},e,{searchQuery:t.query});case"SET_FILTER":return Object.assign({},e,{filterState:t.filterState});default:return e}},E=n(29),w={workflows:[],updateStateErr:!1,nodeRemoved:!1,workflowRemoved:!1,persistedWorkflows:[]};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_WORKFLOW":return Object.assign({},e,{persistedWorkflows:e.persistedWorkflows.concat(t.workflow),updateStateErr:!1,workflowAdded:!0});case"DELETE_WORKFLOW":return e.persistedWorkflows.splice(t.index,1),Object.assign({},e,{workflows:Object(E.a)(e.persistedWorkflows),updateStateErr:!1,workflowRemoved:!0});case"UPDATE_WORKFLOW_STATE":var n=JSON.parse(JSON.stringify(e.persistedWorkflows)),a=n[t.index],r=a.nodes.some((function(e){return"COMPLETED"!==e.state}));return r?Object.assign({},e,{updateStateErr:!0}):(a.state="PENDING"===a.state?"COMPLETED":"PENDING",Object.assign({},e,{persistedWorkflows:n}));case"UPDATE_WORKFLOWS":var l=JSON.parse(JSON.stringify(e.persistedWorkflows));return"fromPersist"===t.updateType?Object.assign({},e,{workflows:l,saved:!1}):Object.assign({},e,{persistedWorkflows:e.workflows,saved:!0});case"ADD_NODE":var c=JSON.parse(JSON.stringify(e.workflows));return c[t.index].nodes.push(t.node),Object.assign({},e,{workflows:c,updateStateErr:!1});case"DELETE_NODE":var o=JSON.parse(JSON.stringify(e.workflows)),s=o[t.index].nodes;return s.pop(),Object.assign({},e,{nodeRemoved:!0,workflows:o});case"UPDATE_NODE_STATE":for(var i=JSON.parse(JSON.stringify(e.workflows)),u=i[t.workflowIndex].nodes,d=u[t.nodeIndex],f=!1,m=0;m<t.nodeIndex;m++)if("COMPLETED"!==u[m].state){f=!0;break}return f&&"IN-PROGRESS"===d.state?Object.assign({},e,{updateStateErr:!0}):(d.state="PENDING"===d.state?"IN-PROGRESS":"COMPLETED",Object.assign({},e,{workflows:i}));case"CLEAR_WORKFLOW_ERROR":return Object.assign({},e,{updateStateErr:!1,nodeRemoved:!1,workflowRemoved:!1,workflowAdded:!1,saved:!1});default:return e}},b={data:null};var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_GROWL":return Object.assign({},e,{data:t.data});default:return e}},k=Object(s.c)({auth:d,workflowHeader:m,workflow:p,message:O}),v=n(22),N=n.n(v),g=n(31),y=N.a.mark(h);function h(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)([]);case 2:case"end":return e.stop()}}),y)}var j=n(12),S=n(13),x="LOGIN_USER",T="LOGOUT_USER",R="SET_SEARCH_QUERY",L="ADD_WORKFLOW",C="DELETE_WORKFLOW",D="ADD_NODE",W="DELETE_NODE",_="UPDATE_NODE_STATE",P="UPDATE_GROWL",A="CLEAR_WORKFLOW_ERROR",I="UPDATE_WORKFLOW_STATE",U="UPDATE_WORKFLOWS";function G(e){return{type:P,data:e}}function F(){return{type:A}}function J(e){return{type:U,updateType:e}}n(42);function K(e,t){e({type:T}),t.replace("/")}var M=function(){var e=Object(j.f)(),t=Object(o.b)(),n=Object(a.useCallback)(K.bind(null,t,e)),l=Object(o.c)((function(e){return e.auth.isLoggedIn}));return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"fs20 fw700 color-white"},"FLOWAPP"),l&&r.a.createElement("button",{className:"logout-btn",onClick:n},"Logout"))},Q=n(16);n(44);function q(e,t){t({type:x,email:"mk@yopmail.com"}),e.replace("/workflows")}function H(){}var Y=function(e){var t=e.history,n=Object(o.b)(),l=Object(a.useCallback)(q.bind(null,t,n),[]);return r.a.createElement("div",{className:"login-container display-flex flex-column justify-space-center align-items-center"},r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"mr-b20 fw700 text-center"},"Login"),r.a.createElement(Q.b,{onSubmit:l,validate:H,render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement(Q.a,{name:"email"},(function(e){var t=e.input,n=e.meta;return r.a.createElement("div",{className:"mr-b20"},r.a.createElement("input",Object.assign({className:"input-field outline-none",type:"email"},t,{placeholder:"Email"})),n.touched&&n.error&&r.a.createElement("span",null,n.error))})),r.a.createElement(Q.a,{name:"password"},(function(e){var t=e.input,n=e.meta;return r.a.createElement("div",{className:"mr-b20"},r.a.createElement("input",Object.assign({className:"input-field outline-none",type:"password"},t,{placeholder:"Password"})),n.touched&&n.error&&r.a.createElement("span",null,n.error))})),r.a.createElement("label",{className:"mr-b20 inline-block cursor-pointer"},r.a.createElement(Q.a,{name:"rememberLogin"},(function(e){var t=e.input,n=e.meta;return r.a.createElement("span",null,r.a.createElement("input",Object.assign({className:"cursor-pointer",type:"checkbox"},t)),n.touched&&n.error&&r.a.createElement("span",null,n.error))})),r.a.createElement("span",{className:"pd-l4 fs14 text-top"},"Remember me")),r.a.createElement("button",{className:"w100 color-white cursor-pointer submit-btn outline-none",type:"submit"},"Login"))}}),r.a.createElement("div",{className:"signup-text cursor-pointer"},"Don't have an account? Sign up here")))},V=n(7);function z(){}var B=function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];var c=this,o=function(){n=null,e.apply(c,r)};clearTimeout(n),n=setTimeout(o,t)}}((function(e,t){t(function(e){return{type:R,query:e}}(e))}),200);var X=function(){var e=Object(o.b)();return r.a.createElement("div",{className:"workflow-search pos-rel"},r.a.createElement(V.d,null),r.a.createElement("input",{className:"search",type:"text",placeholder:"Search Workflows",onKeyUp:function(t){return B(t.target.value,e)}}))};n(45);function Z(e){e({type:L,workflow:{name:"New Workflow",state:"PENDING",nodes:[]}})}var $=function(){var e=Object(o.b)(),t=Object(a.useCallback)(Z.bind(null,e),[]);return r.a.createElement("div",{className:"list-header"},r.a.createElement(X,null),r.a.createElement("button",{className:"add-workflow display-flex align-items-center",onClick:t},r.a.createElement(V.b,null),r.a.createElement("span",{className:"pd-l4"},"Create Workflow")))};n(46);function ee(e,t){e(function(e){return{type:C,index:e}}(t))}function te(e,t){e(function(e){return{type:I,index:e}}(t))}function ne(e,t){e.push("/workflows/".concat(t))}var ae=function(e){var t=e.workflow,n=t.name,l=t.state,c=e.index,s=Object(j.f)(),i=Object(o.b)(),u=Object(a.useCallback)((function(e){ee(i,c),e.stopPropagation()}),[i,c]),d=Object(a.useCallback)((function(e){te(i,c),e.stopPropagation()}),[i,c]),f=Object(a.useCallback)(ne.bind(null,s,c),[]);return r.a.createElement("div",{className:"workflow-card",onClick:f},r.a.createElement("div",{className:"delete-icon",onClick:u},r.a.createElement(V.f,null)),r.a.createElement("div",{className:"workflow-name"},n),r.a.createElement("div",{className:"display-flex justify-space-between align-items-center"},l,r.a.createElement("span",{className:"state-icon ".concat(l.toLowerCase()),onClick:d},r.a.createElement(V.a,null))))};n(47);var re=function(e){var t=e.workflows;return r.a.createElement("div",{className:"workflow-list"},t.map((function(e,t){return r.a.createElement(ae,{key:t,workflow:e,index:t})})))};function le(e,t){"update-error"===t?e(G({type:"error",message:"This workflow can not be updated as all the tasks are not done.",timeout:4e3})):"delete-success"===t&&e(G({type:"success",message:"The workflow has been deleted successfully.",timeout:3e3})),e(F())}var ce=function(){var e=Object(o.b)(),t=Object(a.useCallback)(le.bind(null,e),[]),n=Object(o.c)((function(e){return e.workflow})),l=n.persistedWorkflows,c=n.updateStateErr,s=n.workflowRemoved,i=n.workflowAdded,u=Object(j.f)();return Object(a.useEffect)((function(){c?t("update-error"):s?t("delete-success"):i&&e(F())}),[i,s,c,t,u,l,e]),r.a.createElement("div",null,r.a.createElement($,null),r.a.createElement(re,{workflows:l}))};function oe(e,t){e(function(e){return{type:D,index:e,node:{title:"New Task",content:"Task Content",state:"PENDING"}}}(t))}function se(e,t){e(function(e){return{type:W,index:e}}(t))}function ie(e){e(J())}var ue=function(e){var t=e.index,n=e.nodesCount,l=e.allowShuffle,c=Object(o.b)(),s=Object(a.useCallback)(oe.bind(null,c,t),[]),i=Object(a.useCallback)(se.bind(null,c,t),[]),u=Object(a.useCallback)(ie.bind(null,c),[c]);return r.a.createElement("div",{className:"workflow-actions display-flex align-items-center"},l&&r.a.createElement("button",{className:"shuffle display-flex align-items-center",onClick:function(){}},r.a.createElement(V.c,null),r.a.createElement("span",{className:"pd-l4"},"Shuffle")),r.a.createElement("button",{className:"add-node display-flex align-items-center",onClick:s},r.a.createElement(V.b,null),r.a.createElement("span",{className:"pd-l4"},"Add Node")),n>0&&r.a.createElement("button",{className:"delete-node display-flex align-items-center",onClick:i},r.a.createElement(V.e,null),r.a.createElement("span",{className:"pd-l4"},"Delete")),r.a.createElement("button",{className:"save display-flex align-items-center",onClick:u},r.a.createElement("span",{className:"pd-l4"},"Save")))};n(48);var de=function(e){var t=e.index,n=e.workflow,a=n.name,l=n.nodes,c="COMPLETED"===n.state;return r.a.createElement("div",{className:"workflow-header"},r.a.createElement("input",{class:"workflow-name-text",type:"text",defaultValue:a}),r.a.createElement(ue,{index:t,nodesCount:l.length,allowShuffle:c}))};n(49);function fe(e,t,n){e(function(e,t){return{type:_,workflowIndex:e,nodeIndex:t}}(t,n))}var me=function(e){var t=e.workflowIndex,n=e.nodeIndex,l=e.node,c=l.title,s=l.content,i=l.state,u=Object(o.b)(),d=Object(a.useCallback)(fe.bind(null,u,t,n));return r.a.createElement("div",{className:"workflow-node"},r.a.createElement("div",{className:"node-state-icon ".concat(i.toLowerCase()).concat("COMPLETED"!==i?" cursor-pointer":""),onClick:"COMPLETED"!==i?d:z},r.a.createElement(V.a,null)),r.a.createElement("div",{className:"title",contentEditable:!0},c),r.a.createElement("div",{className:"content",contentEditable:!0},s))};n(50);var Ee=function(e){var t=e.workflowIndex,n=e.workflow.nodes;return r.a.createElement("div",{className:"nodes-list display-flex"},n.map((function(e,n){return r.a.createElement(me,{key:n,node:e,workflowIndex:t,nodeIndex:n})})))};function we(e,t){"update-error"===t?e(G({type:"error",message:"This task can not be completed as the previous tasks are not done.",timeout:5e3})):"delete-success"===t?e(G({type:"success",message:"The last task of this workflow has been deleted successfully.",timeout:4e3})):"saved-success"===t&&e(G({type:"success",message:"The workflow has been saved successfully.",timeout:3e3})),e(F())}var pe=function(e){var t=e.match,n=Number(t.params.index),l=Object(o.b)(),c=Object(a.useCallback)(we.bind(null,l),[]),s=Object(o.c)((function(e){return e.workflow})),i=s.workflows,u=s.updateStateErr,d=s.nodeRemoved,f=s.saved,m=i[n];return Object(a.useEffect)((function(){l(J("fromPersist"))}),[l]),Object(a.useEffect)((function(){u?c("update-error"):d?c("delete-success"):f&&c("saved-success")}),[f,d,u,c]),m?r.a.createElement("div",{className:"workflow"},r.a.createElement(de,{workflow:m,index:n}),r.a.createElement(Ee,{workflow:m,workflowIndex:n})):null};n(51),n(52),n(53);function be(e){e(G(null))}var Oe=function(){var e=Object(o.c)((function(e){return e.message.data}))||{},t=e.message,n=e.type,l=e.timeout,c=Object(o.b)(),s=Object(a.useCallback)(be.bind(null,c),[]);return Object(a.useEffect)((function(){setTimeout(s,l)}),[s,l]),t?r.a.createElement("div",{className:"growl growl-".concat(n)},t):null};var ke=function(){return r.a.createElement(S.a,{basename:"/Workflow-System"},r.a.createElement("div",{className:"app-container"},r.a.createElement(M,null),r.a.createElement(j.c,null,r.a.createElement(j.a,{exact:!0,path:"/",component:function(e){return r.a.createElement(Y,e)}}),r.a.createElement(j.a,{exact:!0,path:"/workflows",component:function(e){return r.a.createElement(ce,e)}}),r.a.createElement(j.a,{exact:!0,path:"/workflows/:index",component:function(e){return r.a.createElement(pe,e)}})),r.a.createElement(Oe,null)))},ve=function(){var e=Object(i.a)(),t=[e],n=Object(s.d)(s.a.apply(void 0,t)),a=Object(s.e)(k,n);return e.run(h),a}();c.a.render(r.a.createElement(o.a,{store:ve},r.a.createElement(ke,null)),document.querySelector(".container"))}},[[32,1,2]]]);
//# sourceMappingURL=main.6f2889bf.chunk.js.map